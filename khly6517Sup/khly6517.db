record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
}

record(bo, "$(P)DISABLE") 
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}

record(stringin, "$(P)FUNC")
{
    field(SCAN, "Passive")
    field(DESC, "Operating mode")
    field(DTYP, "stream")
    field(INP, "@khly6517.proto getMode() $(PORT)")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
    info(alarm, "khly6517")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:FUNC")
    field(SDIS, "$(P)DISABLE")
}

record(stringout, "$(P)FUNC:SP")
{
    field(SCAN, "Passive")
    field(DESC, "Operating mode")
    field(DTYP, "stream")
    field(OUT, "@khly6517.proto setMode $(PORT)")
    field(VAL, "CURR:DC")
    field(FLNK, "$(P)FUNC")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:FUNC:SP")
    field(SDIS, "$(P)DISABLE")
}

record(stringin, "$(P)READ")
{
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(DESC, "Reading")
    field(INP, "@khly6517.proto getRead() $(PORT)")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:READ")
    field(SDIS, "$(P)DISABLE")
}

record(stringin, "$(P)CURR:DC:RANG")
{
    field(SCAN, "Passive")
    field(DESC, "Current range")
    field(DTYP, "stream")
    field(INP, "@khly6517.proto getRangCurr() $(PORT)")
    info(INTEREST, "HIGH")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:CURR:DC:RANG")
    field(SDIS, "$(P)DISABLE")
}

record(stringin, "$(P)VOLT:DC:RANG")
{
    field(SCAN, "Passive")
    field(DESC, "Current range")
    field(DTYP, "stream")
    field(INP, "@khly6517.proto getRangVolt() $(PORT)")
    info(INTEREST, "HIGH")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:VOLT:DC:RANG")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)CURR:DC:RANG:SP")
{
    field(SCAN, "Passive")
    field(DESC, "Current range")
    field(PREC, 7)
    field(DTYP, "stream")
    field(OUT, "@khly6517.proto setRangCurr() $(PORT)")
    field(FLNK, "$(P)CURR:DC:RANG")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:CURR:DC:RANG:SP")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)VOLT:DC:RANG:SP")
{
    field(SCAN, "Passive")
    field(DESC, "Current range")
    field(PREC, 7)
    field(DTYP, "stream")
    field(OUT, "@khly6517.proto setRangVolt() $(PORT)")
    field(FLNK, "$(P)VOLT:DC:RANG")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:VOLT:DC:RANG:SP")
    field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)SYST:ERR")
{
    field(SCAN, "Passive")
    field(DESC, "Oldest error")
    field(DTYP, "stream")
    field(INP, "@khly6517.proto getErr() $(PORT)")
    info(INTEREST, "MEDIUM")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:SYST:ERR")
    field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)STAT:QUE")
{
    field(SCAN, "Passive")
    field(DESC, "Oldest error")
    field(DTYP, "stream")
    field(INP, "@khly6517.proto getQue() $(PORT)")
    info(INTEREST, "MEDIUM")
    field(UDFS, "NO_ALARM")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:QUE")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)*CLS")
{
    field(SCAN, "Passive")
    field(DESC, "Clear error queue")
    field(DTYP, "stream")
    field(OUT, "@khly6517.proto clearQue() $(PORT)")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:STAT:QUE")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)RANG:MODE")
{
    field(DESC, "Device mode state")
    field(VAL, "0")
}

record(sseq, "$(P)BTN:CURR")
{
    field(SCAN, "Passive")
    field(LNK1, "$(P)*CLS PP")
    field(LNK2, "$(P)FUNC:SP PP")
    field(LNK3, "$(P)CURR:DC:RANG:SP PP")
    field(LNK4, "$(P)RANG:MODE PP")
    field(LNK5, "$(P)READ PP")
    field(STR2, "CURR:DC")
    field(DOL3, "$(P)CURR:RANGE:CONST")
    field(DO4, "0")
}

record(sseq, "$(P)BTN:VOLT")
{
    field(SCAN, "Passive")
    field(LNK1, "$(P)*CLS PP")
    field(LNK2, "$(P)FUNC:SP PP")
    field(LNK3, "$(P)VOLT:DC:RANG:SP PP")
    field(LNK4, "$(P)RANG:MODE PP")
    field(LNK5, "$(P)READ PP")
    field(STR2, "VOLT:DC")
    field(DOL3, "$(P)VOLT:RANGE:CONST")
    field(DO4, "1")
}

record(seq, "$(P)FUNC:REFRESH")
{
    field(SCAN, "1 second")
    field(LNK1, "$(P)FUNC PP")
    field(LNK2, "$(P)SYST:ERR PP")
    field(LNK3, "$(P)STAT:QUE PP")
}

record(stringout, "$(P)CURR:RANGE:CONST")
{
    field(SCAN, "Passive")
    field(VAL, "0.02")
}


record(stringout, "$(P)VOLT:RANGE:CONST")
{
    field(SCAN, "Passive")
    field(VAL, "2")
}
### SIMULATION RECORDS ###

record(ao,"$(P)SIM:*CLS")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(stringin,"$(P)SIM:CURR:DC:RANG")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:CURR:DC:RANG","$(P)SIM:CURR:DC:RANG:SP")

record(stringin,"$(P)SIM:FUNC")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:FUNC","$(P)SIM:FUNC:SP")

record(stringin,"$(P)SIM:READ")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai,"$(P)SIM:STAT:QUE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai,"$(P)SIM:SYST:ERR")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(stringin,"$(P)SIM:VOLT:DC:RANG")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:VOLT:DC:RANG","$(P)SIM:VOLT:DC:RANG:SP")

